thoth-cve-update-job
--------------------

.. image:: https://img.shields.io/github/v/tag/thoth-station/cve-update-job?style=plastic
  :target: https://github.com/thoth-station/cve-update-job/tags
  :alt: GitHub tag (latest by date)

.. image:: https://quay.io/repository/thoth-station/cve-update-job/status
  :target: https://quay.io/repository/thoth-station/cve-update-job?tab=tags
  :alt: Quay - Build

A job for updating Thoth's CVE database of packages.

This job checks for new CVE records in the
`advisory-db <https://github.com/pypa/advisory-db>`_ provided
by `PyPA <https://www.pypa.io/>`_. If there are new CVE records found,
this job automatically creates corresponding CVE entries in the
database.

Installation and Deployment
===========================

This job is run as an OpenShift CronJob that checks for updates in the
advisory-db. The deployment templates can be found at
`Thoth's thoth-application <https://github.com/thoth-station/thoth-application>`_.

Running CVE update job locally
==============================

You can run this job locally without any cluster deployment. To do so, issue the following command:

.. code-block:: console

  $ pipenv install  # Install all the requirements
  $ pipenv run python3 ./app.py

The CVE job implementation will by default talk to your local PostgreSQL
instance located on localhost:5432. Follow `local PostgreSQL setup instructions
<https://github.com/thoth-station/storages#running-dgraph-locally>`_ for more
info.
